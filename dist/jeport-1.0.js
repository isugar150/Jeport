var Jeport=function(e,t){var n;if(this.el=e,this.options=t,!e){console.error("Element is required for Jeport");return}let l={showPageNumbers:!0,watermark:{enabled:!1,image:void 0},...t},r=297;function i(e=!1){let t=document.createElement("div");if(t.className="page",e||(t.style.padding="20mm"),l.watermark.enabled&&l.watermark.image){let n=document.createElement("div");n.className="watermark";let r=document.createElement("img");r.src=l.watermark.image,n.appendChild(r),t.appendChild(n)}return t}function o(e,t){let l=e.cloneNode(!0);if(t.appendChild(l),t.scrollHeight>r-10){t.removeChild(l);let o=i();return(n.appendChild(o),e.nodeType===Node.TEXT_NODE)?d(e,t,o):"TABLE"===e.tagName?a(e,t,o):p(e,t,o)}return t}function o(e,t){let l=e.cloneNode(!0);if(t.appendChild(l),t.scrollHeight>r){t.removeChild(l);let o=i();return(n.appendChild(o),e.nodeType===Node.TEXT_NODE)?d(e,t,o):"TABLE"===e.tagName?a(e,t,o):p(e,t,o)}return t}function a(e,t,l){let o=e.cloneNode(!0),a=o.querySelector("thead"),d=o.querySelector("tbody");if(!a||!d)return p(e,t,l);let m=o.cloneNode(!1),h=!0,s=document.createElement("tbody");m.appendChild(s),t.appendChild(m);let c=Array.from(d.rows);for(let g=0;g<c.length;g++){let f=c[g].cloneNode(!0);h&&0===g&&m.insertBefore(a.cloneNode(!0),s),s.appendChild(f),t.scrollHeight>r&&(s.removeChild(f),0===s.rows.length&&t.removeChild(m),l=i(),n.appendChild(l),t=l,m=o.cloneNode(!1),s=document.createElement("tbody"),m.appendChild(s),t.appendChild(m),h=!1,g--)}return t}function d(e,t,n){let l=e.textContent.split("\n"),i="",o="";for(let a=0;a<l.length;a++){let d=i+l[a]+"\n",p=document.createElement("span");if(p.textContent=d,t.appendChild(p),t.scrollHeight<=r)i=d,t.removeChild(p);else{o=l.slice(a).join("\n"),t.removeChild(p);break}}return(i&&t.appendChild(document.createTextNode(i.trim())),o)?(n.appendChild(document.createTextNode(o.trim())),n):t}function p(e,t,l){let i=e.cloneNode(!1);t.appendChild(i);let a=t;for(let d of e.childNodes)a=a.scrollHeight>r?o(d,l):o(d,a);return l&&""===l.textContent.trim()?(n.removeChild(l),t):a}this.init=function(t){(n=document.createElement("div")).className="print-content",n.style.height="auto",e.parentNode.appendChild(n),n.innerHTML="";let a=i();return n.appendChild(a),r=a.clientHeight,function e(t,l){for(let r of t.childNodes)(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE&&""!==r.textContent.trim())&&(l=o(r,l));let i=n.getElementsByClassName("page");for(let a=i.length-1;a>=0;a--){let d=i[a].textContent.trim(),p=i[a].querySelector("img:not(.watermark img)"),m=!p&&d===(i[a].querySelector(".page-number")?.textContent||"").trim();(""===d||m)&&n.removeChild(i[a])}}(e,a),l.showPageNumbers&&function e(){let t=n.getElementsByClassName("page"),l=t.length;for(let r=0;r<l;r++){let i=document.createElement("div");i.className="page-number",i.textContent=`${r+1}/${l}`,t[r].appendChild(i)}}(),e.style.display="none",n.style.display="block",t(),this},this.print=function(){return setTimeout(function(){window.print()},250),this}};window.onload=function(){let e=document.getElementsByTagName("header")[0];if(e){let t=document.getElementsByTagName("body")[0];t.style.marginTop=`${e.clientHeight}px`}},window.onbeforeprint=function(){var e=document.createElement("style");e.innerHTML="@page { size: auto; margin: 0mm; }",document.head.appendChild(e)},window.onafterprint=function(){let e=document.getElementsByClassName("page");if(e.length>0){let t=e[e.length-1];t.offsetHeight<10&&t.remove()}};