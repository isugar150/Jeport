var Jeport=function(e,t){var r;if(this.el=e,this.options=t,!e){console.error("Element is required for Jeport");return}let n={showPageNumbers:!1,watermark:{enabled:!1,image:void 0},...t},l=297;function o(e){let t=e.querySelectorAll("script, style");if(t.length>0)return!0;let r=Array.from(e.children).filter(e=>!e.classList.contains("_jeport_watermark")&&!e.classList.contains("_jeport_page-number")).map(e=>e.textContent).join("").trim();if(""!==r)return!1;let n=Array.from(e.querySelectorAll("img:not(._jeport_watermark img), svg, canvas, table"));return!(n.length>0)}function i(e){if(e.classList.contains("_jeport_watermark")||e.classList.contains("_jeport_page-number"))return!0;let t=e.tagName.toLowerCase();if("script"===t||"style"===t)return!0;for(let r of e.childNodes)if(r.nodeType===Node.TEXT_NODE&&""!==r.nodeValue.trim())return!1;if("IMG"===e.tagName&&e.src&&!e.closest("._jeport_watermark"))return!1;for(let n of e.children)if(!i(n))return!1;return!0}function i(e){let t=e.tagName.toLowerCase();if("script"===t||"style"===t)return!0;for(let r of e.childNodes)if(r.nodeType===Node.TEXT_NODE&&""!==r.nodeValue.trim())return!1;if("IMG"===e.tagName&&e.src)return!1;for(let n of e.children)if(!i(n))return!1;return!0}function a(e=!1){let t=document.createElement("div");if(t.className="_jeport_page",e||(t.style.padding="20mm"),n.watermark.enabled&&n.watermark.image){let r=document.createElement("div");r.className="_jeport_watermark";let l=document.createElement("img");l.src=n.watermark.image,r.appendChild(l),t.appendChild(r)}return t}function d(e,t){let n=e.cloneNode(!0),i=n.querySelector("colgroup"),d=n.querySelector("thead"),s=n.querySelector("tbody");if(!d||!s)return p(e,t);function c(t){let r=document.createElement("table");for(let n of e.attributes)r.setAttribute(n.name,n.value);i&&r.appendChild(i.cloneNode(!0)),t&&r.appendChild(d.cloneNode(!0));let l=document.createElement("tbody");return r.appendChild(l),{table:r,tbody:l}}let{table:m,tbody:f}=c(!0);if(o(t))t.appendChild(m);else{let h=a();r.appendChild(h),(t=h).appendChild(m)}let u=Array.from(s.rows);for(let g=0;g<u.length;g++){let N=u[g].cloneNode(!0);if(f.appendChild(N),t.scrollHeight>l){if(f.removeChild(N),0===f.rows.length)t.removeChild(m);else{let E=a();r.appendChild(E),t=E,({table:m,tbody:f}=c(!1)),t.appendChild(m),g--}}}return t}function p(e,t){let n=e.cloneNode(!0);if(t.appendChild(n),t.scrollHeight>l){t.removeChild(n);let o=a();return(r.appendChild(o),e.nodeType===Node.TEXT_NODE)?function e(t,r,n){let o=t.textContent.split("\n"),i="",a="";for(let d=0;d<o.length;d++){let p=i+o[d]+"\n",s=document.createElement("span");if(s.textContent=p,r.appendChild(s),r.scrollHeight<=l)i=p,r.removeChild(s);else{a=o.slice(d).join("\n"),r.removeChild(s);break}}return(i&&r.appendChild(document.createTextNode(i.trim())),a)?(n.appendChild(document.createTextNode(a.trim())),n):r}(e,t,o):"TABLE"===e.tagName?d(e,o):function e(t,n,o){let i=t.cloneNode(!1);n.appendChild(i);let a=n;for(let d of t.childNodes)a=a.scrollHeight>l?p(d,o):p(d,a);return o&&""===o.textContent.trim()?(r.removeChild(o),n):a}(e,t,o)}return t}this.init=function(t){(r=document.createElement("div")).className="_jeport_print-content",r.style.height="auto",e.parentNode.appendChild(r),r.innerHTML="";let i=a();return r.appendChild(i),l=i.clientHeight,i=function e(t,n){if(t.nodeType===Node.ELEMENT_NODE&&"TABLE"===t.tagName)return d(t,n);for(let l of t.childNodes)(l.nodeType===Node.ELEMENT_NODE||l.nodeType===Node.TEXT_NODE&&""!==l.textContent.trim())&&(l.nodeType===Node.ELEMENT_NODE&&l.classList.contains("_jeport_page-brake")?(n=a(),r.appendChild(n)):n=l.nodeType===Node.ELEMENT_NODE&&"TABLE"===l.tagName?d(l,n):p(l,n));let i=Array.from(r.getElementsByClassName("_jeport_page"));return i.forEach(e=>{o(e)&&e.parentNode===r&&r.removeChild(e)}),n}(e,i),o(i)&&i.parentNode===r&&r.removeChild(i),n.showPageNumbers&&function e(){let t=r.getElementsByClassName("_jeport_page"),n=t.length;for(let l=0;l<n;l++){let o=document.createElement("div");o.className="_jeport_page-number",o.textContent=`${l+1}/${n}`,t[l].appendChild(o)}}(),e.style.display="none",r.style.display="block",t(),this},this.print=function(){return setTimeout(function(){window.print()},250),this}};window.onload=function(){let e=document.getElementsByTagName("header")[0];if(e){let t=document.getElementsByTagName("body")[0];t.style.marginTop=`${e.clientHeight}px`}},window.onbeforeprint=function(){var e=document.createElement("style");e.innerHTML="@page { size: auto; margin: 0mm; }",document.head.appendChild(e)},window.onafterprint=function(){let e=document.getElementsByClassName("page");if(e.length>0){let t=e[e.length-1];t.offsetHeight<10&&t.remove()}};