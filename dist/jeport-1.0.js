var Jeport=function(e,t){var n;if(this.el=e,this.options=t,!e){console.error("Element is required for Jeport");return}let l={showPageNumbers:!1,pagePadding:"50px 30px",watermark:{enabled:!1,image:void 0},...t},r=297;function a(e){let t=e.querySelectorAll("script, style");if(t.length>0)return!0;let n=Array.from(e.children).filter(e=>!e.classList.contains("_jeport_watermark")&&!e.classList.contains("_jeport_page-number")).map(e=>e.textContent).join("").trim();if(""!==n)return!1;let l=Array.from(e.querySelectorAll("img:not(._jeport_watermark img), svg, canvas, table"));return!(l.length>0)}function o(e=!1){let t=document.createElement("div");if(t.className="_jeport_page",e||(t.style.padding=l.pagePadding),l.watermark.enabled&&l.watermark.image){let n=document.createElement("div");n.className="_jeport_watermark";let r=document.createElement("img");r.src=l.watermark.image,n.appendChild(r),t.appendChild(n)}return t}function i(e,t){let l=e.cloneNode(!0),a=l.querySelector("colgroup"),i=l.querySelector("thead"),p=l.querySelector("tbody");if(!i||!p)return d(e,t);function s(t){let n=document.createElement("table");for(let l of e.attributes)n.setAttribute(l.name,l.value);a&&n.appendChild(a.cloneNode(!0)),t&&n.appendChild(i.cloneNode(!0));let r=document.createElement("tbody");return n.appendChild(r),{table:n,tbody:r}}let{table:m,tbody:c}=s(!0);t.appendChild(m);let h=Array.from(p.rows);for(let g=0;g<h.length;g++){let f=h[g].cloneNode(!0);if(c.appendChild(f),t.scrollHeight>r){if(c.removeChild(f),0===c.rows.length)t.removeChild(m);else{let u=o();n.appendChild(u),t=u,({table:m,tbody:c}=s(!1)),t.appendChild(m),g--}}}return t}function d(e,t){let l=e.cloneNode(!0);if(t.appendChild(l),t.scrollHeight>r){t.removeChild(l);let a=o();return(n.appendChild(a),e.nodeType===Node.TEXT_NODE)?function e(t,n,l){let a=t.textContent.split("\n"),o="",i="";for(let d=0;d<a.length;d++){let p=o+a[d]+"\n",s=document.createElement("span");if(s.textContent=p,n.appendChild(s),n.scrollHeight<=r)o=p,n.removeChild(s);else{i=a.slice(d).join("\n"),n.removeChild(s);break}}return(o&&n.appendChild(document.createTextNode(o.trim())),i)?(l.appendChild(document.createTextNode(i.trim())),l):n}(e,t,a):"TABLE"===e.tagName?i(e,a):function e(t,l,a){let o=t.cloneNode(!1);l.appendChild(o);let i=l;for(let p of t.childNodes)i=i.scrollHeight>r?d(p,a):d(p,i);return a&&""===a.textContent.trim()?(n.removeChild(a),l):i}(e,t,a)}return t}this.init=function(t){(n=document.createElement("div")).className="_jeport_print-content",n.style.height="auto",e.parentNode.appendChild(n),n.innerHTML="";let p=o();return n.appendChild(p),r=p.clientHeight,p=function e(t,l){if(t.nodeType===Node.ELEMENT_NODE&&"TABLE"===t.tagName)return i(t,l);for(let r of t.childNodes)(r.nodeType===Node.ELEMENT_NODE||r.nodeType===Node.TEXT_NODE&&""!==r.textContent.trim())&&(r.nodeType===Node.ELEMENT_NODE&&r.classList.contains("_jeport_page-brake")?(l=o(),n.appendChild(l)):l=r.nodeType===Node.ELEMENT_NODE&&"TABLE"===r.tagName?i(r,l):d(r,l));let p=Array.from(n.getElementsByClassName("_jeport_page"));return p.forEach(e=>{a(e)&&e.parentNode===n&&n.removeChild(e)}),l}(e,p),a(p)&&p.parentNode===n&&n.removeChild(p),l.showPageNumbers&&function e(){let t=n.getElementsByClassName("_jeport_page"),l=t.length;for(let r=0;r<l;r++){let a=document.createElement("div");a.className="_jeport_page-number",a.textContent=`${r+1}/${l}`,t[r].appendChild(a)}}(),e.style.display="none",n.style.display="block",t(),this},this.print=function(){return setTimeout(function(){window.print()},250),this}};window.onload=function(){let e=document.getElementsByTagName("header")[0];if(e){let t=document.getElementsByTagName("body")[0];t.style.marginTop=`${e.clientHeight}px`}},window.onbeforeprint=function(){var e=document.createElement("style");e.innerHTML="@page { size: auto; margin: 0mm; }",document.head.appendChild(e)},window.onafterprint=function(){let e=document.getElementsByClassName("page");if(e.length>0){let t=e[e.length-1];t.offsetHeight<10&&t.remove()}};